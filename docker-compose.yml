version: '3.8' # Specify the Docker Compose file format version

services:
  fraud-detection-service:
    build: . # Build the Docker image using the Dockerfile in the current directory
    ports:
      - "8000:8000" # Map port 8000 on the host to port 8000 in the container
    volumes:
      # Mount the local 'full_feat_pipeline' directory to '/app/full_feat_pipeline' in the container.
      # This is where your `full_feature_pipeline.joblib` file (generated by data_processed.py) should reside.
      - ./full_feat_pipeline:/app/full_feat_pipeline

      # Mount the local 'mlruns' directory to '/app/mlruns' in the container.
      # This is where MLflow models are typically stored.
      # Ensure your actual MLflow model is placed within this structure, e.g.,
      # ./mlruns/0/your_run_id/artifacts/model
      - ./mlruns:/app/mlruns
    restart: unless-stopped # Always restart the container unless it is explicitly stopped
